<!DOCTYPE html>
<html>
	<head>		
		<meta name = "author" content = "Angelo Romel Lopez(B00285812)" />
        <script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
        <link rel = "stylesheet" href = "css/mainstyle.css" />
	</head>

	<body>
		<div>
			<!--<p>
				1 day weather forecast<br/>
				<span id = "a"></span>
			</p>
			<p>
				5 day weather forecast<br/>
				<span id = "b"></span><br/>
				<span id = "c"></span><br/>
			</p>-->
			<p>
				5 day weather forecast<br/>
				<ul id = "list">
				</ul>
			</p>
		</div>
		<script>
			var list = $("#list");
			//1 day weather forecast
			$.getJSON( "http://api.openweathermap.org/data/2.5/weather?q=London,uk&appid=2de143494c0b295cca9337e1e96b00e0&units=metric&appid=ccaf6faaeacdea9f10abdff2f83b0e60", function( data ) {
			  /*var items = [];
			  $.each( data, function( key, val ) {
			    items.push( "<li id='" + key + "'>" + val + "</li>" );
			  });
			 
			  $( "<ul/>", {
			    "class": "my-new-list",
			    html: items.join( "" )
			  }).appendTo( "body" );*/
			document.getElementById("a").innerHTML = "City: " + data.name + " Temp: " + data.main.temp + "C" + " Weather: " + data.weather[0].main + "/" + data.weather[0].description + data.weather[0].icon + "<img src = 'http://openweathermap.org/img/w/" + data.weather[0].icon + "'/>";
			});

			//5 days weather forecast based on city name and country code
			$.getJSON("http://api.openweathermap.org/data/2.5/forecast?q=London,uk&appid=2de143494c0b295cca9337e1e96b00e0", function(data){
				/*document.getElementById("b").innerHTML = "Location: " + data5.city.name + ", " + data5.city.country + " Time: " + new Date(data5.list[0].dt).toUTCString() + " Temp: " + data5.list[0].main.temp;

				document.getElementById("c").innerHTML = "Location: " + data5.city.name + ", " + data5.city.country + " Time: " + new Date(data5.list[1].dt).toUTCString() + " Temp: " + data5.list[1].main.temp;*/
				for(var i = 0; i < data.list.length; i ++){
					list.append("<li>" + data.city.name + ", " + data.city.country + " Time: " + data.list[i].dt_txt + " Temp: " + data.list[i].main.temp + " Weather: " + data.list[i].weather[0].description + "</li>");
				}				
			});

			//5 days weather forecast based on latitude and longitude
			$.getJSON("http://api.openweathermap.org/data/2.5/forecast?lat=55.9171832&lon=-4.4495524&appid=2de143494c0b295cca9337e1e96b00e0", function(data5){
				/*document.getElementById("b").innerHTML = "Location: " + data5.city.name + ", " + data5.city.country + " Time: " + new Date(data5.list[0].dt).toUTCString() + " Temp: " + data5.list[0].main.temp;

				document.getElementById("c").innerHTML = "Location: " + data5.city.name + ", " + data5.city.country + " Time: " + new Date(data5.list[1].dt).toUTCString() + " Temp: " + data5.list[1].main.temp;*/
				for(var i = 0; i < data5.list.length; i ++){
					list.append("<li>" + data5.city.name + ", " + data5.city.country + " Time: " + new Date(data5.list[i].dt * 1000).toLocaleString() + " Temp: " + data5.list[i].main.temp + " Weather: " + data5.list[i].weather[0].description + "</li>");
				}				
			});

		</script>
	</body>
</html>